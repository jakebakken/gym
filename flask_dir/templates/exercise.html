{% extends 'base.html' %}{% block title %}Exercise{% endblock %}
<body>
    {% block content %}
    <form method="POST">
        <h1 id="page-title" align="center">Exercise</h1>

        <table id="exercise-table">
            <thead>
                <tr>
                    <th colspan="2">
                        <input
                                type="text"
                                class="form-exercise-title-input"
                                id="workout-name"
                                name="workout-name"
                                placeholder="Workout Name"
                        >
                        <hr/>
                    </th>
                </tr>
            </thead>
            <tbody id="exercise-table-body">
                <tr><th colspan="2" class="exercise-header">Exercise 1</th></tr>
                <tr>
                    <td colspan="2">
                        <input
                                type="text"
                                class="form-exercise-title-input"
                                id="exercise1-name"
                                name="exercise1-name"
                                placeholder="Exercise Name"
                        >
                    </td>
                </tr>

                <tr><th colspan="2">Set 1</th></tr>
                <tr>
                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set1-reps"
                                name="exercise1-set1-reps"
                                placeholder="Reps"
                        >
                    </td>
                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set1-weight"
                                name="exercise1-set1-weight"
                                placeholder="Weight"
                        >
                    </td>
                </tr>

                <tr><th colspan="2">Set 2</th></tr>
                <tr>
                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set2-reps"
                                name="exercise1-set2-reps"
                                placeholder="Reps"
                        >
                    </td>

                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set2-weight"
                                name="exercise1-set2-weight"
                                placeholder="Weight"
                        >
                    </td>
                </tr>

                <tr><th colspan="2">Set 3</th></tr>
                <tr>
                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set3-reps"
                                name="exercise1-set3-reps"
                                placeholder="Reps"
                        >
                    </td>
                    <td>
                        <input
                                type="number"
                                class="form-exercise"
                                id="exercise1-set3-weight"
                                name="exercise1-set3-weight"
                                placeholder="Weight"
                        >
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Dropdown for LBS / KG -->
        <div class="add-div">
            <button id="add-exercise-button" class="btn btn-primary" type="button" onclick="addExercise">Add Exercise</button>
            <button id="add-set-button" class="btn btn-primary" type="button" onclick="addSet">Add Set</button>
        </div>
        <div class="finish-workout-div">
            <button id="finish-workout-button" class="btn btn-danger" type="submit">Finish Workout</button>
        </div>
    </form>
    <script type="text/javascript">
        window.onload = function () {
            var exerciseNumber = 2;
            var setNumber = 4;
            const addExerciseButton = document.getElementById("add-exercise-button");
            const addSetButton = document.getElementById("add-set-button");
            let exerciseTableBody = document.getElementById("exercise-table-body");

            addSetButton.onclick = function addSet() {
            // add new set every click, max 10 sets

                const header_row = document.createElement("tr");
                const data_row = document.createElement("tr");
                const header = document.createElement("th");
                const reps_data = document.createElement("td");
                const weight_data = document.createElement("td");
                const reps_input = document.createElement("input");
                const weight_input = document.createElement("input");

                header.innerText = "Set " + setNumber;
                header.setAttribute("colspan", 2);

                reps_input.type = "number";
                reps_input.id = "exercise" + exerciseNumber + "-set" + setNumber + "-reps";
                reps_input.name = "exercise" + exerciseNumber + "-set" + setNumber + "-reps";
                reps_input.setAttribute("class", "form-exercise");
                reps_input.placeholder = "Reps";

                weight_input.type = "number";
                weight_input.id = "exercise" + exerciseNumber + "-set" + setNumber + "-weight";
                weight_input.name = "exercise" + exerciseNumber + "-set" + setNumber + "-weight";
                weight_input.setAttribute("class", "form-exercise");
                weight_input.placeholder = "Weight";

                if (setNumber <= 10) {
                    // add set header
                    header_row.append(header);

                    // add input areas to respective table data tags
                    reps_data.append(reps_input);
                    weight_data.append(weight_input);

                    // add data tags to single table row
                    data_row.append(reps_data);
                    data_row.append(weight_data);

                    // add header row & data row to exercise table
                    exerciseTableBody.append(header_row);
                    exerciseTableBody.append(data_row);
                };

                // increment set count
                setNumber += 1;
            };
        }
    </script>
    {% endblock %}
</body>